<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Windows 10 web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="main.css">
</head>
<body>
<footer>
    <div class="start-button hover" onclick="openStartMenu()"></div>
    <div class="taskbar-apps"></div>
    <div class="taskbar-buttons">
        <div class="internet hover"></div>
        <div class="volume hover" onclick="toggleVolumeMenu()"></div>
        <div class="lang hover" onclick="toggleLangSelector()"><p id="lang-indicator">ENG</p></div>
        <div class="time hover" onclick="toggleCalendar()"><p id="taskbar-time"></p></div>
        <div class="notification-bar-open-button hover" onclick="toggleNotificationBar()"></div>
    </div>
    <div class="roll-all-windows hover"></div>
</footer>
<div id="start-menu">
    <div class="popup-menu" id="user-popup">
        <div class="hover"><p>Изменить параметры учетной записи</p></div>
        <div class="hover"><p>Заблокировать</p></div>
        <div class="hover"><p>Выход</p></div>
    </div>
    <div class="popup-menu" id="power-popup">
        <div class="hover"><p>Спящий режим</p></div>
        <div class="hover"><p>Завершение работы</p></div>
        <div class="hover"><p>Перезагрузка</p></div>
    </div>
    <div class="changeable-width" id="side-buttons-container">
        <div class="start-menu-button changeable-width hover" onclick="openSideButtonsContainer()"><p>ПУСК</p></div>
        <div id="start-menu-buttons-container">
            <div class="start-menu-button changeable-width hover" onclick="togglePopupMenu('user-popup')"><p>Пользователь</p></div>
            <div class="start-menu-button changeable-width hover"><p>Параметры</p></div>
            <div class="start-menu-button changeable-width hover" onclick="togglePopupMenu('power-popup')"><p>Выключение</p></div>
        </div>
    </div>
    <div class="app-list">
        <h4 class="hover">Часто используемые</h4>
        <ul>
            <li class="hover"><div><img src="images/webstorm.png">JetBrains WebStorm</div></li>
            <li class="hover"><div><img src="images/stardew.png">Stardew Valley</div></li>
        </ul>
        <h4 class="hover">M</h4>
        <ul>
            <li class="start-menu-dir hover" onclick="toggleDir()">
                <div>
                    <img src="images/start-menu-dir-closed.png" class="dir-img">
                    Microsoft Office 2016
                </div>
                <img src="images/roll-down-arrow.png" class="roll-down-arrow">
            </li>
            <ul class="hidden-dir" style="height: 0">
                <li class="hover"><div><img src="images/word.png">Word 2016</div></li>
                <li class="hover"><div><img src="images/excel.png">Excel 2016</div></li>
                <li class="hover"><div><img src="images/powerpoint.png">PowerPoint 2016</div></li>
            </ul>
        </ul>
    </div>
    <div id="start-menu-tiles">
        <p>Tools</p>
        <div>
            <img src="images/scissors.png">
            <img src="images/paint-net.png">
            <img src="images/geany.png">
            <img src="images/google-drive-sync.png">
        </div>
        <p>Browsers</p>
        <div>
            <img src="images/chrome.png">
            <img src="images/firefox.png">
            <img src="images/opera.png">
        </div>
        <p>Apps</p>
        <div>
            <img src="images/spotify.png">
            <img src="images/discord.png">
            <img src="images/telegram.png">
        </div>
        <div>
            <img src="images/steam.png">
            <img src="images/origin.png">
            <img src="images/uplay.png">
            <img src="images/utorrent.png">
        </div>
    </div>
</div>
<div id="notification-bar">
    <div id="notification-center">
        <h2>ЦЕНТР УВЕДОМЛЕНИЙ</h2>
        <p>Новых уведомлений нет</p>
    </div>
    <div id="notification-tiles">
        <div id="toggle-tiles">
            <p onclick="notificationTilesToggle()">Свернуть</p>
        </div>
        <div id="notification-bar-tiles-container" class="container">
            <div id="tablet-mode"><p>Режим планшета</p></div>
            <div id="network"><p>Сеть</p></div>
            <div id="all-settings"><p>Все параметры</p></div>
            <div id="do-not-disturb"><p>Не беспокоить</p></div>
            <div id="vpn"><p>Виртуальная сеть (VPN)</p></div>
            <div id="project-screen"><p>Проеци&shy;ровать</p></div>
            <div id="connect"><p>Подклю&shy;читься</p></div>
        </div>
    </div>
</div>
<div id="calendar">
    <h1 id="insert-time"></h1>
    <p id="insert-date"></p>
</div>
<div id="lang-selector">
    <div class="lang-selector-bar hover" onclick="selectLang('РУС')">
        <div class="lang-label">РУС<br>RU</div>
        <div>Русский<br>Русская клавиатура</div>
    </div>
    <div class="lang-selector-bar hover" onclick="selectLang('ENG')">
        <div class="lang-label">ENG</div>
        <div>Английский (США)<br>США клавиатура</div>
    </div>
</div>
<div id="volume-menu">
    <p>Динамики</p>
    <div>
        <img id="volume-big" src="images/volume-big.png">
        <input id="volume-slider" type="range" min="0" max="100" value="100">
        <p id="volume-slider-output">100</p>
    </div>
</div>
<script>
    const widthChange = document.getElementsByClassName("changeable-width");
    const startMenu = document.getElementById("start-menu");
    const dirs = document.getElementsByClassName("hidden-dir");
    const popupMenus = document.getElementsByClassName("popup-menu");
    const dirArrows = document.getElementsByClassName("roll-down-arrow");
    const dirImgs = document.querySelectorAll(".dir-img");
    const notificationBar = document.querySelector("#notification-bar");
    const notificationTilesContainer = document.querySelector("#notification-bar-tiles-container");
    const calendar = document.querySelector("#calendar");
    const langIndicator = document.querySelector("#lang-indicator");
    const langSelectorBars = document.querySelectorAll(".lang-selector-bar");
    const volumeSlider = document.querySelector("#volume-slider");
    const volumeBig = document.querySelector("#volume-big");

    volumeSlider.oninput = function() {
        document.querySelector("#volume-slider-output").innerHTML = this.value;
        if (volumeSlider.value == 0) {
            volumeBig.src = "images/volume-big-0.png";
        } else if (volumeSlider.value >= 1 && volumeSlider.value <= 32) {
            volumeBig.src = "images/volume-big-1-32.png";
        } else if (volumeSlider.value >= 33 && volumeSlider.value <= 65) {
            volumeBig.src = "images/volume-big-33-65.png";
        } else {
            volumeBig.src = "images/volume-big.png";
        }
    }

    function selectLang(lang) {
        langIndicator.innerHTML = lang;
        for (let i = 0; i < langSelectorBars.length; i++) {
            langSelectorBars[i].style.backgroundColor = "initial";
        }
        event.currentTarget.style.backgroundColor = "rgb(77, 141, 164)";
    }

    function addZero(i) {
        if (i < 10) {
            i = "0" + i;
        }
        return i;
    }

    function getMonthName(i, z) {
        const monthNames = ["январь", "февраль", "март", "апрель", "май", "июнь", "июль", "август", "сентябрь", "октябрь", "ноябрь", "декабрь"];
        i = monthNames[i];
        if (z) {
            if (i.endsWith("т")) {
                i = i.split(i.charAt(i.length-1))[0] + "а";
            } else {
                i = i.split(i.charAt(i.length-1))[0] + "я";
            }
        }
        return i;
    }

    let now = new Date();
    document.querySelector("#insert-time").innerHTML = now.toLocaleTimeString();
    document.querySelector("#insert-date").innerHTML = String(now.getDate()) + " " + getMonthName(now.getMonth(), true) + " " + now.getFullYear() + " г.";
    document.querySelector("#taskbar-time").innerHTML = String(now.getHours()) + ":" + String(addZero(now.getMinutes()));

    function updateTime() {
        let now = new Date();
        document.querySelector("#insert-time").innerHTML = now.toLocaleTimeString();
        document.querySelector("#insert-date").innerHTML = String(now.getDate()) + " " + getMonthName(now.getMonth(), true) + " " + now.getFullYear() + " г.";
        document.querySelector("#taskbar-time").innerHTML = String(now.getHours()) + ":" + String(addZero(now.getMinutes()));
    }

    setInterval(updateTime, 1000);

    function openSideButtonsContainer() {
        for (let i = 0; i < widthChange.length; i++) {
            widthChange[i].classList.toggle("side-buttons-container-open");
        }
    }

    function openStartMenu() {
        startMenu.classList.toggle("start-menu-open");
        if (!startMenu.classList.contains("start-menu-open")) {
            for (let i = 0; i < widthChange.length; i++) {
                widthChange[i].classList.remove("side-buttons-container-open");
            }
            for (let i = 0; i < dirs.length; i++) {
                dirs[i].style.height = "0px";
            }
            for (let i = 0; i < dirArrows.length; i++) {
                dirArrows[i].src = "images/roll-down-arrow.png";
            }
            for (let i = 0; i < dirImgs.length; i++) {
                dirImgs[i].src = "images/start-menu-dir-closed.png";
            }
            for (let i = 0; i < popupMenus.length; i++) {
                popupMenus[i].classList.remove("popup-menu-open");
            }
        }
        notificationBar.classList.remove("notification-bar-open");
    }

    function toggleCalendar() {
        calendar.classList.toggle("calendar-open");
    }

    function toggleDir() {
        let hiddenDir = event.currentTarget.nextElementSibling;
        let dirImg = event.currentTarget.firstElementChild.firstElementChild;
        let arrowImg = event.currentTarget.children[1];

        if (hiddenDir.style.height === "0px") {
            hiddenDir.style.height = (hiddenDir.children.length * 36).toString() + "px";
            dirImg.src = "images/start-menu-dir-open.png";
            arrowImg.src = "images/roll-up-arrow.png"
        } else {
            hiddenDir.style.height = "0";
            dirImg.src = "images/start-menu-dir-closed.png";
            arrowImg.src = "images/roll-down-arrow.png"
        }
    }
    
    function togglePopupMenu(popup) {
        document.getElementById(popup).classList.toggle("popup-menu-open");
    }
    
    function toggleNotificationBar() {
        notificationBar.classList.toggle("notification-bar-open");
    }
    
    function notificationTilesToggle() {
        notificationTilesContainer.classList.toggle("container-small");
        if (notificationTilesContainer.classList.contains("container-small")) {
            event.currentTarget.innerHTML = "Развернуть";
        } else {
            event.currentTarget.innerHTML = "Свернуть";
        }
    }

    function toggleLangSelector() {
        document.querySelector("#lang-selector").classList.toggle("lang-selector-open");
    }

    function toggleVolumeMenu() {
        document.querySelector("#volume-menu").classList.toggle("volume-menu-open");
    }
</script>
</body>
</html>